// JustGage v2.0.0-alpha.1 - Minified UMD

var JustGage=(()=>{var _=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var D=(i,t)=>{for(var e in t)_(i,e,{get:t[e],enumerable:!0})},J=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of V(t))!j.call(i,r)&&r!==e&&_(i,r,{get:()=>t[r],enumerable:!(n=P(t,r))||n.enumerable});return i};var Y=i=>J(_({},"__esModule",{value:!0}),i);var q={};D(q,{JustGage:()=>L,VERSION:()=>Z,default:()=>H});function S(i){return i==null}function z(i){return i!=null&&!isNaN(i)}function G(i,...t){i=i||{};for(let e of t)if(e)for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}function k(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{let t=Math.random()*16|0;return(i==="x"?t:t&3|8).toString(16)})}function s(i,t,e,n,r){let o=n,l=!1;if(!S(i)&&(!S(e)&&typeof e=="object"&&i in e?(o=e[i],l=!0):!S(t)&&typeof t=="object"&&i in t?(o=t[i],l=!0):o=n,l&&!S(r)))switch(r){case"int":o=parseInt(o,10);break;case"float":o=parseFloat(o);break;default:break}return o}var a={value:0,min:0,max:100,reverse:!1,gaugeWidthScale:1,gaugeColor:"#edebeb",label:"",valueFontColor:"#010101",valueFontFamily:"Arial",labelFontColor:"#b3b3b3",labelFontFamily:"Arial",symbol:"",shadowOpacity:.2,shadowSize:5,shadowVerticalOffset:3,levelColors:["#a9d70b","#f9c802","#ff0000"],startAnimationTime:700,startAnimationType:">",refreshAnimationTime:700,refreshAnimationType:">",donutStartAngle:90,valueMinFontSize:16,labelMinFontSize:10,minLabelMinFontSize:10,maxLabelMinFontSize:10,hideValue:!1,hideMinMax:!1,showMinMax:!0,showInnerShadow:!1,humanFriendly:!1,humanFriendlyDecimal:0,noGradient:!1,donut:!1,differential:!1,relativeGaugeSize:!1,counter:!1,decimals:0,customSectors:{},formatNumber:!1,pointer:!1,pointerOptions:{},displayRemaining:!1,targetLine:null,targetLineColor:"#000000",targetLineWidth:1.5,textRenderer:null,onAnimationEnd:null,minTxt:!1,maxTxt:!1,defaults:!1,parentNode:null,width:400,height:320,startAngle:135,endAngle:405,title:"",titleFontColor:"#999999",titleFontFamily:"Arial",titleFontSize:null,titleFontWeight:"normal",valueFontSize:null,valueFontWeight:"normal",labelFontSize:null,labelFontWeight:"normal",minMaxLabelFontSize:null};function $(i,t={}){if(S(i))throw new Error("JustGage: Configuration object is required");let{defaults:e,...n}=i;e&&(i=G({},e,n));let r={classId:k(),id:i.id,parentNode:s("parentNode",i,t,null),width:s("width",i,t,a.width),height:s("height",i,t,a.height),value:s("value",i,t,a.value,"float"),min:s("min",i,t,a.min,"float"),max:s("max",i,t,a.max,"float"),minTxt:s("minTxt",i,t,a.minTxt),maxTxt:s("maxTxt",i,t,a.maxTxt),reverse:s("reverse",i,t,a.reverse),symbol:s("symbol",i,t,a.symbol),decimals:s("decimals",i,t,a.decimals),counter:s("counter",i,t,a.counter),hideValue:s("hideValue",i,t,a.hideValue),hideMinMax:s("hideMinMax",i,t,a.hideMinMax),showMinMax:s("showMinMax",i,t,a.showMinMax),valueFontColor:s("valueFontColor",i,t,a.valueFontColor),valueFontFamily:s("valueFontFamily",i,t,a.valueFontFamily),labelFontColor:s("labelFontColor",i,t,a.labelFontColor),labelFontFamily:s("labelFontFamily",i,t,a.labelFontFamily),valueMinFontSize:s("valueMinFontSize",i,t,a.valueMinFontSize),labelMinFontSize:s("labelMinFontSize",i,t,a.labelMinFontSize),minLabelMinFontSize:s("minLabelMinFontSize",i,t,a.minLabelMinFontSize),maxLabelMinFontSize:s("maxLabelMinFontSize",i,t,a.maxLabelMinFontSize),gaugeWidthScale:s("gaugeWidthScale",i,t,a.gaugeWidthScale),gaugeColor:s("gaugeColor",i,t,a.gaugeColor),levelColors:s("levelColors",i,t,a.levelColors),noGradient:s("noGradient",i,t,a.noGradient),shadowOpacity:s("shadowOpacity",i,t,a.shadowOpacity),shadowSize:s("shadowSize",i,t,a.shadowSize),shadowVerticalOffset:s("shadowVerticalOffset",i,t,a.shadowVerticalOffset),showInnerShadow:s("showInnerShadow",i,t,a.showInnerShadow),startAnimationTime:s("startAnimationTime",i,t,a.startAnimationTime),startAnimationType:s("startAnimationType",i,t,a.startAnimationType),refreshAnimationTime:s("refreshAnimationTime",i,t,a.refreshAnimationTime),refreshAnimationType:s("refreshAnimationType",i,t,a.refreshAnimationType),donut:s("donut",i,t,a.donut),donutStartAngle:s("donutStartAngle",i,t,a.donutStartAngle),differential:s("differential",i,t,a.differential),relativeGaugeSize:s("relativeGaugeSize",i,t,a.relativeGaugeSize),customSectors:s("customSectors",i,t,a.customSectors),pointer:s("pointer",i,t,a.pointer),pointerOptions:s("pointerOptions",i,t,a.pointerOptions),targetLine:s("targetLine",i,t,a.targetLine,"float"),targetLineColor:s("targetLineColor",i,t,a.targetLineColor),targetLineWidth:s("targetLineWidth",i,t,a.targetLineWidth),humanFriendly:s("humanFriendly",i,t,a.humanFriendly),humanFriendlyDecimal:s("humanFriendlyDecimal",i,t,a.humanFriendlyDecimal),formatNumber:s("formatNumber",i,t,a.formatNumber),displayRemaining:s("displayRemaining",i,t,a.displayRemaining),label:s("label",i,t,a.label),title:s("title",i,t,a.title),titleFontColor:s("titleFontColor",i,t,a.titleFontColor),titleFontFamily:s("titleFontFamily",i,t,a.titleFontFamily),titleFontSize:s("titleFontSize",i,t,a.titleFontSize),titleFontWeight:s("titleFontWeight",i,t,a.titleFontWeight),valueFontSize:s("valueFontSize",i,t,a.valueFontSize),valueFontWeight:s("valueFontWeight",i,t,a.valueFontWeight),labelFontSize:s("labelFontSize",i,t,a.labelFontSize),labelFontWeight:s("labelFontWeight",i,t,a.labelFontWeight),minMaxLabelFontSize:s("minMaxLabelFontSize",i,t,a.minMaxLabelFontSize),startAngle:s("startAngle",i,t,a.startAngle),endAngle:s("endAngle",i,t,a.endAngle),textRenderer:s("textRenderer",i,t,a.textRenderer),onAnimationEnd:s("onAnimationEnd",i,t,a.onAnimationEnd)};return X(r)}function X(i){if(i.value>i.max&&(i.value=i.max),i.value<i.min&&(i.value=i.min),!i.id&&!i.parentNode)throw new Error("JustGage: Either id or parentNode must be provided");if(i.min>=i.max)throw new Error("JustGage: min value must be less than max value");return(!Array.isArray(i.levelColors)||i.levelColors.length===0)&&(i.levelColors=a.levelColors),i}var N=class{constructor(t,e,n){this.container=t,this.width=e,this.height=n,this.svg=null,this.elements=new Map,this.init()}init(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this.width),this.svg.setAttribute("height",this.height),this.svg.setAttribute("viewBox",`0 0 ${this.width} ${this.height}`),this.svg.style.overflow="hidden",this.container.innerHTML="",this.container.appendChild(this.svg)}circle(t,e,n){let r=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("cx",t),r.setAttribute("cy",e),r.setAttribute("r",n),this.svg.appendChild(r),new M(r)}rect(t,e,n,r){let o=document.createElementNS("http://www.w3.org/2000/svg","rect");return o.setAttribute("x",t),o.setAttribute("y",e),o.setAttribute("width",n),o.setAttribute("height",r),this.svg.appendChild(o),new M(o)}path(t){let e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),this.svg.appendChild(e),new M(e)}line(t,e,n,r){let o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t),o.setAttribute("y1",e),o.setAttribute("x2",n),o.setAttribute("y2",r),this.svg.appendChild(o),new M(o)}text(t,e,n){let r=document.createElementNS("http://www.w3.org/2000/svg","text");return r.setAttribute("x",t),r.setAttribute("y",e),r.textContent=n,this.svg.appendChild(r),new M(r)}sector(t,e,n,r,o,l){let f=this.createSectorPath(t,e,n,r,o,l);return this.path(f)}createSectorPath(t,e,n,r,o,l){let f=(o-90)*Math.PI/180,p=(l-90)*Math.PI/180,x=t+n*Math.cos(f),b=e+n*Math.sin(f),m=t+r*Math.cos(f),u=e+r*Math.sin(f),c=t+r*Math.cos(p),d=e+r*Math.sin(p),g=t+n*Math.cos(p),w=e+n*Math.sin(p),F=l-o;F<=0&&(F+=360);let y=F>180?1:0;return[`M ${x} ${b}`,`L ${m} ${u}`,`A ${r} ${r} 0 ${y} 1 ${c} ${d}`,`L ${g} ${w}`,`A ${n} ${n} 0 ${y} 0 ${x} ${b}`,"Z"].join(" ")}createGaugePath(t,e,n,r,o,l,f,p,x=!1,b=!1){let m,u,c,d,g,w,F,y,v,h;if(e<0&&!b&&(n-=e,t-=e,e=0),x)m=(1-2*(t-e)/(n-e))*Math.PI,u=r/2-r/30,c=u-r/6.666666666666667*p,d=r/2+l,g=o/2+f,w=d+u*Math.cos(m),F=g-u*Math.sin(m),y=d+c*Math.cos(m),v=g-c*Math.sin(m),h="M"+(d-c)+","+g+" ",h+="L"+(d-u)+","+g+" ",t-e>(n-e)/2&&(h+="A"+u+","+u+" 0 0 1 "+(d+u)+","+g+" "),h+="A"+u+","+u+" 0 0 1 "+w+","+F+" ",h+="L"+y+","+v+" ",t-e>(n-e)/2&&(h+="A"+c+","+c+" 0 0 0 "+(d+c)+","+g+" "),h+="A"+c+","+c+" 0 0 0 "+(d-c)+","+g+" ",h+="Z ";else if(b){m=(1-(t-e)/(n-e))*Math.PI,u=r/2-r/10,c=u-r/6.666666666666667*p,d=r/2+l,g=o/1.25+f,w=d+u*Math.cos(m),F=g-u*Math.sin(m),y=d+c*Math.cos(m),v=g-c*Math.sin(m);let A=e+(n-e)/2,C=t<A?1:0,I=t<A?0:1;h="M"+d+","+(g-c)+" ",h+="L"+d+","+(g-u)+" ",h+="A"+u+","+u+" 0 0 "+I+" "+w+","+F+" ",h+="L"+y+","+v+" ",h+="A"+c+","+c+" 0 0 "+C+" "+d+","+(g-c)+" ",h+="Z "}else m=(1-(t-e)/(n-e))*Math.PI,u=r/2-r/10,c=u-r/6.666666666666667*p,d=r/2+l,g=o/1.25+f,w=d+u*Math.cos(m),F=g-u*Math.sin(m),y=d+c*Math.cos(m),v=g-c*Math.sin(m),h="M"+(d-c)+","+g+" ",h+="L"+(d-u)+","+g+" ",h+="A"+u+","+u+" 0 0 1 "+w+","+F+" ",h+="L"+y+","+v+" ",h+="A"+c+","+c+" 0 0 0 "+(d-c)+","+g+" ",h+="Z ";return h}pointer(t,e,n,r,o){let l=(o-90)*Math.PI/180,f=t+n*Math.cos(l),p=e+n*Math.sin(l),x=l+Math.PI/2,b=l-Math.PI/2,m=r/2,u=t+m*Math.cos(x),c=e+m*Math.sin(x),d=t+m*Math.cos(b),g=e+m*Math.sin(b),w=`M ${f} ${p} L ${u} ${c} L ${d} ${g} Z`;return this.path(w)}clear(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);this.elements.clear()}remove(){this.svg&&this.svg.parentNode&&this.svg.parentNode.removeChild(this.svg),this.elements.clear()}},M=class{constructor(t){this.element=t}attr(t){return typeof t=="string"?this.element.getAttribute(t):(Object.keys(t).forEach(e=>{let n=t[e];switch(e){case"fill":this.element.setAttribute("fill",n);break;case"stroke":this.element.setAttribute("stroke",n);break;case"stroke-width":case"strokeWidth":this.element.setAttribute("stroke-width",n);break;case"opacity":this.element.setAttribute("opacity",n);break;case"font-family":case"fontFamily":this.element.setAttribute("font-family",n);break;case"font-size":case"fontSize":this.element.setAttribute("font-size",n);break;case"font-weight":case"fontWeight":this.element.setAttribute("font-weight",n);break;case"text-anchor":case"textAnchor":this.element.setAttribute("text-anchor",n);break;case"dominant-baseline":case"dominantBaseline":this.element.setAttribute("dominant-baseline",n);break;default:this.element.setAttribute(e,n)}}),this)}animate(t,e=500,n="ease"){let r=this.element,o=[];return Object.keys(t).forEach(l=>{let f=l;l==="strokeWidth"&&(f="stroke-width"),l==="fontSize"&&(f="font-size"),o.push(`${f} ${e}ms ${n}`)}),r.style.transition=o.join(", "),setTimeout(()=>{this.attr(t)},10),setTimeout(()=>{r.style.transition=""},e+10),this}transform(t){return this.element.setAttribute("transform",t),this}remove(){return this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}text(t){return t===void 0?this.element.textContent:(this.element.textContent=t,this)}};function T(i){return i.charAt(0)==="#"?i.substring(1,7):i}function E(i){return typeof i=="string"&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(i)}function O(i,t,e,n,r){let o,l,f,p,x,b,m,u,c,d,g,w=r&&r.ranges&&r.ranges.length>0;if(n=n||w,w){r.percents===!0&&(i=t*100);for(let h=0;h<r.ranges.length;h++)if(i>=r.ranges[h].lo&&i<=r.ranges[h].hi)return r.ranges[h].color}let F=e.length;if(F===1)return e[0];let y=n?1/F:1/(F-1),v=[];for(let h=0;h<e.length;h++)o=n?y*(h+1):y*h,l=parseInt(T(e[h]).substring(0,2),16),f=parseInt(T(e[h]).substring(2,4),16),p=parseInt(T(e[h]).substring(4,6),16),v[h]={pct:o,color:{r:l,g:f,b:p}};if(t===0)return`rgb(${[v[0].color.r,v[0].color.g,v[0].color.b].join(",")})`;for(let h=0;h<v.length;h++)if(t<=v[h].pct)return n?`rgb(${[v[h].color.r,v[h].color.g,v[h].color.b].join(",")})`:(x=v[h-1],b=v[h],m=b.pct-x.pct,u=(t-x.pct)/m,c=1-u,d=u,g={r:Math.floor(x.color.r*c+b.color.r*d),g:Math.floor(x.color.g*c+b.color.g*d),b:Math.floor(x.color.b*c+b.color.b*d)},`rgb(${[g.r,g.g,g.b].join(",")})`)}function R(i,t){let e=Math.pow(10,t),n=" KMGTPE",r=0,o=1e3;for(;(i>=o||i<=-o)&&++r<n.length;)i=i/o;return r=r>=n.length?n.length-1:r,Math.round(i*e)/e+n[r]}function W(i){let t=i.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}var L=class{constructor(t){if(this.events={},!t)throw new Error("JustGage: Configuration object is required");if(t.id){if(this.node=document.getElementById(t.id),!this.node)throw new Error(`JustGage: No element with id '${t.id}' found`)}else if(t.parentNode)this.node=t.parentNode;else throw new Error("JustGage: Either id or parentNode must be provided");let e=this.node.dataset||{};this.config=$(t,e),this.originalValue=t.value??-1,this._initializeGauge()}_initializeGauge(){let t=this.config.width,e=this.config.height;if(!t||!e){let n=this.node.getBoundingClientRect();t||(t=n.width||400),e||(e=n.height||320),this.config.width=t,this.config.height=e}if(this.renderer=new N(this.node,t,e),this.canvas={gauge:null,level:null,title:null,value:null,min:null,max:null,pointer:null},this.config.showInnerShadow){let n=this.renderer.svg.querySelector("defs")||this.renderer.svg.appendChild(document.createElementNS("http://www.w3.org/2000/svg","defs"));this.generateShadow(this.renderer.svg,n)}this._drawGauge()}_drawGauge(){let t=this.config,{widgetW:e,widgetH:n,dx:r,dy:o}=this._calculateGaugeGeometry(),l=this.renderer.createGaugePath(t.max,t.min,t.max,e,n,r,o,t.gaugeWidthScale||1,t.donut,t.differential);this.canvas.gauge=this.renderer.path(l).attr({fill:t.gaugeColor,stroke:"none"}),this._drawLevel(),this._drawLabels(),t.pointer&&this._drawPointer(),t.targetLine!==null&&t.targetLine!==void 0&&this._drawTargetLine()}_drawLevel(){let t=this.config,{widgetW:e,widgetH:n,dx:r,dy:o}=this._calculateGaugeGeometry(),l=this._getLevelColor(t.value),f=this.renderer.createGaugePath(t.value,t.min,t.max,e,n,r,o,t.gaugeWidthScale||1,t.donut,t.differential);this.canvas.level=this.renderer.path(f).attr({fill:l,stroke:"none"})}_calculateGaugeGeometry(){let t=this.config,e=t.width,n=t.height,r,o,l,f;if(t.donut)e>n?(o=n,r=o):(e<n,r=e,o=r),l=(e-r)/2,f=(n-o)/2;else{if(e>n){if(o=n,r=o*2,r>e){let c=r/e;r=r/c,o=o/c}}else e<n,r=e,o=r/2;l=(e-r)/2,f=(n-o)/2}let p=l+r/2,x=t.donut?f+o/2:f+o/1.25,b=t.donut?r/2-r/30:r/2-r/10,m=t.gaugeWidthScale||1,u=b-r/6.666666666666667*m;return{cx:p,cy:x,outerRadius:b,innerRadius:u,widgetW:r,widgetH:o,dx:l,dy:f}}_drawLabels(){let t=this.config,{cx:e,cy:n,widgetW:r,widgetH:o,dx:l,dy:f}=this._calculateGaugeGeometry(),p=t.titleFontSize||Math.max(o/16,10),x=t.valueFontSize||(o/6.4>16?o/5.4:18);t.title&&(this.canvas.title=this.renderer.text(e,n-o/16,t.title).attr({"font-family":t.titleFontFamily,"font-size":p,"font-weight":t.titleFontWeight,"text-anchor":"middle","dominant-baseline":"central",fill:t.titleFontColor}));let b=this._formatValue(t.value),m=l+r/2,u=t.donut?n:t.label?f+o/1.85:f+o/1.7;this.canvas.value=this.renderer.text(m,u,b).attr({"font-family":t.valueFontFamily,"font-size":x,"font-weight":t.valueFontWeight,"text-anchor":"middle","dominant-baseline":"central",fill:t.valueFontColor});let c=t.labelFontSize||Math.max(o/16,10);if(t.label){let d=u+c;this.canvas.label=this.renderer.text(m,d,t.label).attr({"font-family":t.labelFontFamily,"font-size":c,"text-anchor":"middle","dominant-baseline":"central",fill:t.labelFontColor})}if(t.showMinMax&&!t.hideMinMax){let d=t.gaugeWidthScale||1,g;t.donut?g=u+c:g=u+x/2+5;let w=l+r/10+r/6.666666666666667*d/2,F=l+r-r/10-r/6.666666666666667*d/2,y=g,v=g,h=t.min;t.minTxt?h=t.minTxt:t.humanFriendly?h=this._humanFriendlyNumber(t.min,t.humanFriendlyDecimal):t.formatNumber&&(h=this._formatNumber(t.min));let A=t.max;t.maxTxt?A=t.maxTxt:t.humanFriendly?A=this._humanFriendlyNumber(t.max,t.humanFriendlyDecimal):t.formatNumber&&(A=this._formatNumber(t.max));let C=t.minMaxLabelFontSize||Math.max(o/16,10);t.reverse?(this.canvas.min=this.renderer.text(F,v,h).attr({"font-family":t.labelFontFamily,"font-size":C,"text-anchor":"middle","dominant-baseline":"central",fill:t.labelFontColor}),this.canvas.max=this.renderer.text(w,y,A).attr({"font-family":t.labelFontFamily,"font-size":C,"text-anchor":"middle","dominant-baseline":"central",fill:t.labelFontColor})):(this.canvas.min=this.renderer.text(w,y,h).attr({"font-family":t.labelFontFamily,"font-size":C,"text-anchor":"middle","dominant-baseline":"central",fill:t.labelFontColor}),this.canvas.max=this.renderer.text(F,v,A).attr({"font-family":t.labelFontFamily,"font-size":C,"text-anchor":"middle","dominant-baseline":"central",fill:t.labelFontColor}))}}_drawPointer(){let t=this.config,{cx:e,cy:n,outerRadius:r,widgetW:o}=this._calculateGaugeGeometry(),l=t.max-t.min,f=(t.value-t.min)/l,p=t.endAngle-t.startAngle;p<=0&&(p+=360);let x=t.startAngle+f*p,b=t.pointerOptions.toplength||o*3.5/100,m=r+b,u=t.pointerOptions.bottomwidth||o/100;this.canvas.pointer=this.renderer.pointer(e,n,m,u,x).attr({fill:t.pointerOptions.color||"#000000",stroke:"none"})}_drawTargetLine(){let t=this.config,{cx:e,cy:n,outerRadius:r,innerRadius:o}=this._calculateGaugeGeometry(),l=t.max-t.min,f=(t.targetLine-t.min)/l,p=t.endAngle-t.startAngle;p<=0&&(p+=360);let x=t.startAngle+f*p;t.reverse&&(x=t.startAngle+(1-f)*p);let b=(x-90)*Math.PI/180,m=o*.9,u=r*1.05,c=e+m*Math.cos(b),d=n+m*Math.sin(b),g=e+u*Math.cos(b),w=n+u*Math.sin(b);this.canvas.targetLine=this.renderer.line(c,d,g,w).attr({stroke:t.targetLineColor,"stroke-width":t.targetLineWidth,"stroke-linecap":"round"})}_getLevelColor(t){let e=this.config,n=e.max-e.min,r=(t-e.min)/n;return O(t,r,e.levelColors,e.noGradient,e.customSectors)}_formatValue(t){let e=this.config,n=t;if(e.textRenderer&&typeof e.textRenderer=="function"){let r=e.textRenderer(n);if(r!==!1)return r}return e.humanFriendly?n=this._humanFriendlyNumber(n,e.humanFriendlyDecimal)+e.symbol:e.formatNumber?n=this._formatNumber((n*1).toFixed(e.decimals))+e.symbol:e.displayRemaining?n=((e.max-n)*1).toFixed(e.decimals)+e.symbol:n=(n*1).toFixed(e.decimals)+e.symbol,n}_humanFriendlyNumber(t,e){return R(t,e)}_formatNumber(t){return W(t)}refresh(t,e,n,r){if(!z(t))throw new Error("JustGage: refresh() requires a numeric value");let o=t;if(r!=null&&(this.config.label=r,this.canvas.label&&this.canvas.label.attr({text:this.config.label})),z(n)&&(this.config.min=n,this.canvas.min)){let l=this.config.min;this.config.minTxt?l=this.config.minTxt:this.config.humanFriendly?l=this._humanFriendlyNumber(this.config.min,this.config.humanFriendlyDecimal):this.config.formatNumber&&(l=this._formatNumber(this.config.min)),this.canvas.min.attr({text:l})}if(z(e)&&(this.config.max=e,this.canvas.max)){let l=this.config.max;this.config.maxTxt?l=this.config.maxTxt:this.config.humanFriendly?l=this._humanFriendlyNumber(this.config.max,this.config.humanFriendlyDecimal):this.config.formatNumber&&(l=this._formatNumber(this.config.max)),this.canvas.max.attr({text:l})}if(t*1>this.config.max*1&&(t=this.config.max*1),t*1<this.config.min*1&&(t=this.config.min*1),this.config.value=t*1,!this.config.counter&&this.canvas.value){let l=this._formatValue(o);this.canvas.value.attr({text:l})}this.canvas.level&&(this.canvas.level.remove(),this._drawLevel()),this.config.pointer&&this.canvas.pointer&&(this.canvas.pointer.remove(),this._drawPointer()),this.config.onAnimationEnd&&typeof this.config.onAnimationEnd=="function"&&setTimeout(()=>{this.config.onAnimationEnd.call(this)},this.config.refreshAnimationTime)}update(t,e){if(typeof t=="string")this._updateProperty(t,e);else if(t&&typeof t=="object")for(let[n,r]of Object.entries(t))this._updateProperty(n,r)}_updateProperty(t,e){switch(t){case"valueFontColor":if(!E(e)){console.warn("JustGage: valueFontColor must be a valid hex color");return}this.config.valueFontColor=e,this.canvas.value&&this.canvas.value.attr({fill:e});break;case"labelFontColor":if(!E(e)){console.warn("JustGage: labelFontColor must be a valid hex color");return}this.config.labelFontColor=e,this.canvas.min&&this.canvas.min.attr({fill:e}),this.canvas.max&&this.canvas.max.attr({fill:e}),this.canvas.label&&this.canvas.label.attr({fill:e});break;case"gaugeColor":this.config.gaugeColor=e,this.canvas.background&&this.canvas.background.attr({fill:e});break;case"levelColors":this.config.levelColors=e,this.canvas.level&&(this.canvas.level.remove(),this._drawLevel());break;case"targetLine":this.config.targetLine=e,this.canvas.targetLine&&(this.canvas.targetLine.remove(),this.canvas.targetLine=null),e!=null&&this._drawTargetLine();break;case"targetLineColor":this.config.targetLineColor=e,this.canvas.targetLine&&this.canvas.targetLine.attr({stroke:e});break;case"targetLineWidth":this.config.targetLineWidth=e,this.canvas.targetLine&&this.canvas.targetLine.attr({"stroke-width":e});break;case"symbol":if(this.config.symbol=e,this.canvas.value){let n=this._formatValue(this.config.value);this.canvas.value.attr({text:n})}break;case"decimals":if(this.config.decimals=e,this.canvas.value){let n=this._formatValue(this.config.value);this.canvas.value.attr({text:n})}break;default:console.warn(`JustGage: "${t}" is not a supported update setting`)}}_updateVisuals(){if(!(!this.canvas||!this.renderer)){if(this.canvas.level&&this.canvas.level.remove(),this._drawLevel(),this.canvas.value){let t=this._formatValue(this.config.value);this.canvas.value.text(t)}this.config.pointer&&this.canvas.pointer&&(this.canvas.pointer.remove(),this._drawPointer())}}destroy(){this.renderer&&this.renderer.remove(),this.node?.parentNode&&(this.node.innerHTML="");for(let t in this.events)delete this.events[t];this.node=null,this.config=null,this.events={},this.renderer=null,this.canvas=null}getValue(){return this.config.value}getConfig(){return{...this.config}}on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}off(t,e){if(this.events[t])if(e){let n=this.events[t].indexOf(e);n>-1&&this.events[t].splice(n,1)}else this.events[t]=[]}_emit(t,...e){this.events[t]&&this.events[t].forEach(n=>{try{n.apply(this,e)}catch(r){console.error(`JustGage: Error in ${t} event handler:`,r)}})}generateShadow(t,e){let n=this.config,r="inner-shadow-"+(n.id||n.classId),o=document.createElementNS("http://www.w3.org/2000/svg","filter");o.setAttribute("id",r),e.appendChild(o);let l=document.createElementNS("http://www.w3.org/2000/svg","feOffset");l.setAttribute("dx",0),l.setAttribute("dy",n.shadowVerticalOffset),o.appendChild(l);let f=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");f.setAttribute("result","offset-blur"),f.setAttribute("stdDeviation",n.shadowSize),o.appendChild(f);let p=document.createElementNS("http://www.w3.org/2000/svg","feComposite");p.setAttribute("operator","out"),p.setAttribute("in","SourceGraphic"),p.setAttribute("in2","offset-blur"),p.setAttribute("result","inverse"),o.appendChild(p);let x=document.createElementNS("http://www.w3.org/2000/svg","feFlood");x.setAttribute("flood-color","black"),x.setAttribute("flood-opacity",n.shadowOpacity),x.setAttribute("result","color"),o.appendChild(x);let b=document.createElementNS("http://www.w3.org/2000/svg","feComposite");b.setAttribute("operator","in"),b.setAttribute("in","color"),b.setAttribute("in2","inverse"),b.setAttribute("result","shadow"),o.appendChild(b);let m=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return m.setAttribute("operator","over"),m.setAttribute("in","shadow"),m.setAttribute("in2","SourceGraphic"),o.appendChild(m),n.showInnerShadow&&(this.canvas.background&&this.canvas.background.attr({filter:`url(#${r})`}),this.canvas.level&&this.canvas.level.attr({filter:`url(#${r})`})),r}};var H=L,Z="2.0.0";typeof window<"u"&&(window.JustGage=L);return Y(q);})();
/**
 * @file JustGage - Modern ES6+ implementation of animated SVG gauges
 * @version 1.7.0
 * @author Bojan Djuricic <pindjur@gmail.com>
 * @license MIT
 */
/**
 * JustGage - Modern SVG Gauges
 * Entry point for the library
 *
 * @version 2.0.0
 * @author Bojan Djuricic (@Toorshia)
 * @license MIT
 */
//# sourceMappingURL=justgage.umd.min.js.map
